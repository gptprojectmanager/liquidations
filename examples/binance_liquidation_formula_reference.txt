Binance Liquidation Price Calculation Formula
Source: https://gist.github.com/highfestiva/b71e76f51eed84d56c1be8ebbcc286b5

FORMULA:
liq_price = (wallet_balance + maint_amount - contract_qty*entry_price) /
            (abs(contract_qty) * (maint_margin_rate - direction))

Where:
- direction = 1 for long positions (contract_qty >= 0)
- direction = -1 for short positions (contract_qty < 0)

MAINTENANCE MARGIN LOOKUP TABLE (BTC/USDT):
Position Notional (USDT) | MMR%  | Maint Amount
        0 -      50,000   | 0.4%  |          0
   50,000 -     250,000   | 0.5%  |         50
  250,000 -   1,000,000   | 1.0%  |      1,300
1,000,000 -  10,000,000   | 2.5%  |     16,300
10,000,000 - 20,000,000   | 5.0%  |    266,300
20,000,000 - 50,000,000   | 10.0% |  1,266,300
50,000,000 - 100,000,000  | 12.5% |  2,516,300
100,000,000 - 200,000,000 | 15.0% |  5,016,300
200,000,000 - 300,000,000 | 25.0% | 25,016,300
300,000,000 - 500,000,000 | 50.0% | 100,016,300

EXAMPLE 1: Long position with leverage
- Position: LONG 1 BTC at $67,000 with 10x leverage
- Wallet balance = 1 * 67000 / 10 = $6,700
- Position notional = $67,000 → Tier 1 (MMR=0.4%, MA=0)
- Liquidation = (6700 + 0 - 1*67000) / (1 * (0.004 - 1))
              = -60,300 / -0.996
              = $60,542.17
- Loss: (60,542 - 67,000) / 67,000 = -9.64%

EXAMPLE 2: Short position with leverage
- Position: SHORT 0.5 BTC at $67,000 with 25x leverage
- Wallet balance = 0.5 * 67000 / 25 = $1,340
- Position notional = $33,500 → Tier 1 (MMR=0.4%, MA=0)
- Liquidation = (1340 + 0 - (-0.5)*67000) / (0.5 * (0.004 - (-1)))
              = 35,090 / 0.502
              = $69,920.32
- Loss: (67,000 - 69,920) / 67,000 = -4.36%

KEY INSIGHTS:
1. Higher leverage = closer liquidation price
2. Position size affects MMR tier (larger positions = higher MMR)
3. Long liquidations occur BELOW entry price
4. Short liquidations occur ABOVE entry price
5. Formula accounts for maintenance amount (flat fee per tier)

IMPLEMENTATION NOTE:
This formula is for isolated margin mode. Cross margin is more complex.
Does not account for funding rate or unrealized PnL from other positions.
